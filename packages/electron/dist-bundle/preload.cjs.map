{"version":3,"file":"preload.cjs","mappings":"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","sources":["webpack://@app/electron/./src/preload.ts","webpack://@app/electron/external commonjs2 \"electron\"","webpack://@app/electron/../shared/dist/ipc.js","webpack://@app/electron/webpack/bootstrap","webpack://@app/electron/webpack/runtime/define property getters","webpack://@app/electron/webpack/runtime/hasOwnProperty shorthand","webpack://@app/electron/webpack/runtime/make namespace object","webpack://@app/electron/webpack/startup"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst electron_1 = __importDefault(require(\"electron\"));\nconst { contextBridge, ipcRenderer } = electron_1.default;\nconst shared_1 = require(\"@app/shared\");\nconst api = {\n    workspace: {\n        async select(options) {\n            const parsed = (0, shared_1.validateWorkspaceSelectOptions)(options ?? {});\n            const res = await ipcRenderer.invoke(shared_1.Channels.workspaceSelect, parsed);\n            return (0, shared_1.validateWorkspaceSelectResult)(res);\n        },\n    },\n    file: {\n        async read(input) {\n            const parsed = (0, shared_1.validateFileReadInput)(input);\n            const res = await ipcRenderer.invoke(shared_1.Channels.fileRead, parsed);\n            return (0, shared_1.validateFileReadResult)(res);\n        },\n        async write(input) {\n            const parsed = (0, shared_1.validateFileWriteInput)(input);\n            const res = await ipcRenderer.invoke(shared_1.Channels.fileWrite, parsed);\n            return (0, shared_1.validateFileWriteResult)(res);\n        },\n    },\n    settings: {\n        async get() {\n            const res = await ipcRenderer.invoke(shared_1.Channels.settingsGet, {});\n            return res; // validated in main\n        },\n        async update(input) {\n            const parsed = (0, shared_1.validateSettingsUpdateInput)(input);\n            const res = await ipcRenderer.invoke(shared_1.Channels.settingsUpdate, parsed);\n            return res; // validated in main\n        },\n    },\n};\ncontextBridge.exposeInMainWorld('api', api);\n","module.exports = require(\"electron\");","export const Channels = {\n    workspaceSelect: 'workspace:select',\n    fileRead: 'file:read',\n    fileWrite: 'file:write',\n    settingsGet: 'settings:get',\n    settingsUpdate: 'settings:update',\n};\n// Runtime validators with defaults\nexport function validateWorkspaceSelectOptions(raw) {\n    const o = (raw ?? {});\n    const type = o.type ?? 'directory';\n    if (type !== 'directory' && type !== 'file')\n        throw new Error('type must be \"directory\" or \"file\"');\n    const multiple = o.multiple ?? false;\n    if (typeof multiple !== 'boolean')\n        throw new Error('multiple must be boolean');\n    return { type, multiple };\n}\nexport function validateWorkspaceSelectResult(raw) {\n    const o = (raw ?? {});\n    const paths = Array.isArray(o.paths) ? o.paths : [];\n    if (!paths.every((p) => typeof p === 'string'))\n        throw new Error('paths must be string[]');\n    return { paths: paths };\n}\nexport function validateFileReadInput(raw) {\n    const o = (raw ?? {});\n    const path = o.path;\n    if (typeof path !== 'string' || path.length < 1)\n        throw new Error('path must be non-empty string');\n    const encoding = o.encoding ?? 'utf-8';\n    if (encoding !== 'utf-8')\n        throw new Error('encoding must be \"utf-8\"');\n    return { path, encoding };\n}\nexport function validateFileReadResult(raw) {\n    const o = (raw ?? {});\n    if (typeof o.data !== 'string')\n        throw new Error('data must be string');\n    return { data: o.data };\n}\nexport function validateFileWriteInput(raw) {\n    const o = (raw ?? {});\n    const path = o.path;\n    const data = o.data;\n    if (typeof path !== 'string' || path.length < 1)\n        throw new Error('path must be non-empty string');\n    if (typeof data !== 'string')\n        throw new Error('data must be string');\n    const encoding = o.encoding ?? 'utf-8';\n    if (encoding !== 'utf-8')\n        throw new Error('encoding must be \"utf-8\"');\n    return { path, data, encoding };\n}\nexport function validateFileWriteResult(raw) {\n    const o = (raw ?? {});\n    const ok = o.ok;\n    if (ok !== true)\n        throw new Error('ok must be true');\n    return { ok: true };\n}\nexport function validateSettingsData(raw) {\n    const o = (raw ?? {});\n    const recentPaths = Array.isArray(o.recentPaths) ? o.recentPaths : [];\n    if (!recentPaths.every((p) => typeof p === 'string'))\n        throw new Error('recentPaths must be string[]');\n    const preferences = o.preferences ?? undefined;\n    return { recentPaths: recentPaths, preferences };\n}\nexport function validateSettingsGetResult(raw) {\n    const o = (raw ?? {});\n    return { settings: validateSettingsData(o.settings) };\n}\nexport function validateSettingsUpdateInput(raw) {\n    const o = (raw ?? {});\n    const partial = {};\n    if ('recentPaths' in o) {\n        partial.recentPaths = validateSettingsData({ recentPaths: o.recentPaths }).recentPaths;\n    }\n    if ('preferences' in o) {\n        const prefs = o.preferences;\n        if (prefs != null && typeof prefs !== 'object')\n            throw new Error('preferences must be object');\n        partial.preferences = prefs;\n    }\n    return { settings: partial };\n}\nexport function validateSettingsUpdateResult(raw) {\n    return validateSettingsGetResult(raw);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(235);\n"],"names":["__importDefault","this","mod","__esModule","Object","defineProperty","exports","value","electron_1","contextBridge","ipcRenderer","default","shared_1","api","workspace","select","options","parsed","validateWorkspaceSelectOptions","res","invoke","Channels","workspaceSelect","validateWorkspaceSelectResult","file","read","input","validateFileReadInput","fileRead","validateFileReadResult","write","validateFileWriteInput","fileWrite","validateFileWriteResult","settings","async","settingsGet","update","validateSettingsUpdateInput","settingsUpdate","exposeInMainWorld","module","require","raw","o","type","Error","multiple","paths","Array","isArray","every","p","path","length","encoding","data","ok","validateSettingsData","recentPaths","preferences","undefined","validateSettingsGetResult","partial","prefs","validateSettingsUpdateResult","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","call","d","definition","key","enumerable","get","obj","prop","prototype","hasOwnProperty","r","Symbol","toStringTag","__webpack_exports__"],"sourceRoot":""}